{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\dropshipping\\\\mobile developpement\\\\bentriaa\\\\screens\\\\Profile.js\";\nimport React, { useState, useEffect } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { TheContextConsumer } from \"../context/context\";\nexport default function Profile(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      appartementList = _useState2[0],\n      setappartementList = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ChargesList = _useState4[0],\n      setChargesList = _useState4[1];\n\n  var FindNextJun = function FindNextJun(date) {\n    var dateToSec = date.getTime();\n    var junDateToSec = date.setMonth(5);\n    junDateToSec = date.setDate(1);\n\n    if (dateToSec - junDateToSec > 0) {\n      return new Date(365 * 24 * 60 * 60 * 1000 + junDateToSec);\n    } else {\n      return new Date(junDateToSec);\n    }\n  };\n\n  var chargeParAnnee = function chargeParAnnee(Appartement) {\n    var dayPrice = 4850 / 365;\n    var today = new Date();\n    today.setUTCHours(0, 0, 0, 0);\n    var NextJun = FindNextJun(today);\n    var x = Math.floor(dayPrice * (NextJun.getTime() - Appartement.DateDeSignatureDuContrat.toDate().getTime()) / (1000 * 60 * 60 * 24));\n\n    if (x >= 4850) {\n      while (true) {\n        x = x - 4850;\n        console.log(x);\n\n        if (x < 4850) {\n          break;\n        }\n      }\n    } else {\n      console.log(x);\n    }\n  };\n\n  var charges = function charges(ListDesAppartements) {\n    var results = [];\n    var today = new Date();\n    today.setUTCHours(0, 0, 0, 0);\n    var NextJunFromToDayTimeStamp = FindNextJun(today).getTime();\n    var dayPrice = 4850 / 365;\n    ListDesAppartements.map(function (appartment, i) {\n      var app = {\n        titreFoncier: appartment.titreFoncier,\n        chargesListe: []\n      };\n      var ContractTimeStamp = appartment.DateDeSignatureDuContrat.toDate().getTime();\n      var ContractnextJuneTimeStamp = FindNextJun(appartment.DateDeSignatureDuContrat.toDate()).getTime();\n\n      do {\n        app[\"chargesListe\"].push({\n          days: Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24)),\n          charge: Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24) * (4850 / 365)),\n          saison: new Date(ContractnextJuneTimeStamp - 1000 * 365 * 60 * 60 * 24).getFullYear() + \"/\" + new Date(ContractnextJuneTimeStamp).getFullYear()\n        });\n        ContractTimeStamp = ContractnextJuneTimeStamp;\n        ContractnextJuneTimeStamp += 365 * 24 * 60 * 60 * 1000;\n      } while (ContractnextJuneTimeStamp < NextJunFromToDayTimeStamp);\n\n      results.push(app);\n    });\n    return results;\n  };\n\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n  return React.createElement(TheContextConsumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, function _callee2(value) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", React.createElement(View, {\n              style: styles.container,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 25\n              }\n            }, React.createElement(View, {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }\n            }), React.createElement(Text, {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }\n            }, \"Profile\"), React.createElement(Text, {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 29\n              }\n            }), React.createElement(View, {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 29\n              }\n            }, React.createElement(Button, {\n              title: \"back\",\n              onPress: function onPress() {\n                navigation.navigate(\"Dashboard\");\n              },\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }\n            }))));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'space-around'\n  }\n});","map":{"version":3,"sources":["D:/dropshipping/mobile developpement/bentriaa/screens/Profile.js"],"names":["React","useState","useEffect","TheContextConsumer","Profile","navigation","appartementList","setappartementList","ChargesList","setChargesList","FindNextJun","date","dateToSec","getTime","junDateToSec","setMonth","setDate","Date","chargeParAnnee","Appartement","dayPrice","today","setUTCHours","NextJun","x","Math","floor","DateDeSignatureDuContrat","toDate","console","log","charges","ListDesAppartements","results","NextJunFromToDayTimeStamp","map","appartment","i","app","titreFoncier","chargesListe","ContractTimeStamp","ContractnextJuneTimeStamp","push","days","charge","saison","getFullYear","value","styles","container","navigate","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { Alert } from 'react-native'\r\nimport { Button } from 'react-native'\r\nimport { View, Text,StyleSheet } from 'react-native'\r\nimport { TheContextConsumer } from '../context/context'\r\n\r\nexport default function Profile({navigation}) {\r\n\r\n    const [appartementList, setappartementList] = useState([])\r\n    const [ChargesList, setChargesList] = useState(\"\")\r\n\r\n    const FindNextJun = (date)=>{\r\n        let dateToSec = date.getTime()\r\n        let junDateToSec = date.setMonth(5)\r\n        junDateToSec = date.setDate(1)\r\n        if(dateToSec-junDateToSec > 0){\r\n            return(new Date(365*24*60*60*1000+junDateToSec))\r\n        }else{\r\n            return(new Date(junDateToSec))\r\n        }\r\n    }\r\n    const chargeParAnnee = (Appartement) => {\r\n        let dayPrice = 4850/365;\r\n        let today = new Date()\r\n        today.setUTCHours(0, 0, 0, 0);\r\n        let NextJun = FindNextJun(today)\r\n        let x = (Math.floor( dayPrice*(NextJun.getTime()-Appartement.DateDeSignatureDuContrat.toDate().getTime())/(1000*60*60*24) ))\r\n\r\n        if(x >= 4850){\r\n            while(true){\r\n                x = x-4850\r\n                console.log(x)\r\n                if(x<4850){\r\n                    break\r\n                }\r\n            }            \r\n        }else{\r\n            console.log(x)\r\n        }\r\n\r\n        \r\n    }\r\n    const charges = (ListDesAppartements) => {\r\n        let results = []\r\n        let today = new Date()\r\n        today.setUTCHours(0, 0, 0, 0);\r\n        let NextJunFromToDayTimeStamp = FindNextJun(today).getTime()\r\n        let dayPrice = 4850/365\r\n\r\n        ListDesAppartements.map((appartment,i)=>{\r\n            \r\n            let app = {\r\n                titreFoncier : appartment.titreFoncier,\r\n                chargesListe : []\r\n            }\r\n            let ContractTimeStamp = appartment.DateDeSignatureDuContrat.toDate().getTime()\r\n            let ContractnextJuneTimeStamp = FindNextJun(appartment.DateDeSignatureDuContrat.toDate()).getTime()\r\n\r\n            \r\n            \r\n            do{\r\n                app[\"chargesListe\"].push({\r\n                    days : Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24) ),\r\n                    charge : Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24)*(4850/365) ),\r\n                    saison : (new Date(ContractnextJuneTimeStamp-(1000*365*60*60*24))).getFullYear()+\"/\"+(new Date(ContractnextJuneTimeStamp)).getFullYear()\r\n                })\r\n                ContractTimeStamp = ContractnextJuneTimeStamp;\r\n                ContractnextJuneTimeStamp += 365*24*60*60*1000\r\n                \r\n            }while(ContractnextJuneTimeStamp < NextJunFromToDayTimeStamp)\r\n            \r\n            \r\n            results.push(app)\r\n        })\r\n         \r\n        \r\n        return(results)\r\n        \r\n        \r\n    }\r\n    useEffect(async () => {\r\n        // await\r\n        \r\n        // setChargesList(()=>{\r\n        //     return(charges(appartementList))\r\n        // })\r\n        \r\n    }, [])\r\n\r\n    \r\n\r\n    return (\r\n        <TheContextConsumer>\r\n                {async (value) => {\r\n\r\n                    // await setappartementList(value.userState.proprietaireDe);\r\n                    return(\r\n                        <View style={styles.container}>\r\n                            <View></View>\r\n                            <Text>Profile</Text>\r\n                            \r\n                            <Text>\r\n                                {/* {(ChargesList) && (\r\n                                  <Text>{JSON.stringify(ChargesList)} </Text>  \r\n                                )} */}\r\n                                \r\n                            </Text>\r\n                            <View>\r\n                                <Button\r\n                                    title=\"back\"\r\n                                    onPress={()=>{\r\n                                        navigation.navigate(\"Dashboard\")\r\n                                    }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n\r\n                    )\r\n                }}\r\n        </TheContextConsumer>        \r\n    )\r\n}\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-around',\r\n    },\r\n  });"]},"metadata":{},"sourceType":"module"}