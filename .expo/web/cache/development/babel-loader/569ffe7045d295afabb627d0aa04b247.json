{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\dropshipping\\\\mobile developpement\\\\bentriaa\\\\context\\\\context.js\";\nimport React, { createContext, useEffect, useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { auThentication, fireStore } from \"../firebase/firebase\";\nvar TheContext = createContext();\nexport default function TheContextProvider(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      userState = _useState2[0],\n      setuserState = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      usersList = _useState4[0],\n      setusersList = _useState4[1];\n\n  var getUsersList = function getUsersList() {\n    var t = [];\n    fireStore.collection(\"users\").get().then(function (snapshot) {\n      snapshot.docs.map(function (doc) {\n        var x = doc.data();\n        x.proprietaireDe.map(function (appartement) {\n          appartement[\"DateDeSignatureDuContrat\"].seconds += 3600;\n          appartement[\"DateDeSignatureDuContrat\"] = appartement[\"DateDeSignatureDuContrat\"].toDate();\n        });\n        x.id = doc.id;\n\n        if (!x.isAdmin) {\n          t.push(x);\n          console.log(x);\n        }\n      });\n    }).then(function (e) {\n      setusersList(t);\n    });\n  };\n\n  var Login = function Login(email, password) {\n    auThentication.signInWithEmailAndPassword(email, password).then(function (Credentials) {\n      fireStore.collection('users').doc(Credentials.user.uid).get().then(function (doc) {\n        setuserState(doc.data());\n        getUsersList();\n      });\n    });\n  };\n\n  var addNewUser = function addNewUser(userToadd) {\n    return auThentication.createUserWithEmailAndPassword(userToadd.email, userToadd.password).then(function (Credentials) {\n      fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToadd).catch(function (e) {\n        Alert.alert(e.toString());\n      }).catch(function (e) {\n        return Alert.alert(e.toString());\n      });\n    }).then(function () {\n      Alert.alert(userToadd.email, \"ajouté 👍\");\n    }).catch(function (e) {\n      return Alert.alert(e.toString());\n    });\n  };\n\n  var LogOut = function LogOut() {\n    auThentication.signOut();\n    setuserState({\n      connected: false,\n      isAdmin: false,\n      uid: \"\",\n      infos: {}\n    });\n  };\n\n  return React.createElement(TheContext.Provider, {\n    value: {\n      userState: userState,\n      usersList: usersList,\n      Login: Login,\n      LogOut: LogOut,\n      addNewUser: addNewUser,\n      getUsersList: getUsersList\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, props.children);\n}\nvar TheContextConsumer = TheContext.Consumer;\nexport { TheContextProvider, TheContextConsumer };","map":{"version":3,"sources":["D:/dropshipping/mobile developpement/bentriaa/context/context.js"],"names":["React","createContext","useEffect","useState","auThentication","fireStore","TheContext","TheContextProvider","props","userState","setuserState","usersList","setusersList","getUsersList","t","collection","get","then","snapshot","docs","map","doc","x","data","proprietaireDe","appartement","seconds","toDate","id","isAdmin","push","console","log","e","Login","email","password","signInWithEmailAndPassword","Credentials","user","uid","addNewUser","userToadd","createUserWithEmailAndPassword","set","catch","Alert","alert","toString","LogOut","signOut","connected","infos","children","TheContextConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\nimport { Alert } from \"react-native\";\r\nimport { auThentication, fireStore } from \"../firebase/firebase\";\r\n\r\nconst TheContext = createContext();\r\n\r\nexport default function TheContextProvider(props) {\r\n\r\n    const [userState, setuserState] = useState({});\r\n    const [usersList, setusersList] = useState([])\r\n\r\n    const getUsersList = () => {\r\n        let t = []\r\n        fireStore.collection(\"users\").get().then((snapshot) => {\r\n            \r\n            snapshot.docs.map((doc) => {\r\n                let x = doc.data();\r\n                x.proprietaireDe.map((appartement)=>{\r\n                appartement[\"DateDeSignatureDuContrat\"].seconds += 3600\r\n\r\n                // Alert.alert( JSON.stringify(appartement[\"DateDeSignatureDuContrat\"].toDate()))\r\n                appartement[\"DateDeSignatureDuContrat\"] = appartement[\"DateDeSignatureDuContrat\"].toDate()\r\n                })\r\n                \r\n                x.id = doc.id;\r\n                if(!x.isAdmin){\r\n                    t.push(x)\r\n                    console.log(x)\r\n                }\r\n            })\r\n\r\n        }).then((e)=>{setusersList(t)}) \r\n    }\r\n    // useEffect(() => {\r\n    //     getUsersList()\r\n    //     // console.log(\"download\")\r\n    // }, [])\r\n    \r\n\r\n    const Login = (email,password) => {\r\n        \r\n        auThentication.signInWithEmailAndPassword(email,password).then((Credentials)=>{\r\n            \r\n            fireStore.collection('users').doc(Credentials.user.uid).get().then((doc)=>{\r\n                setuserState(doc.data());\r\n                getUsersList();\r\n            })\r\n            // Alert.alert(Credentials.user.uid);\r\n        })\r\n    }\r\n    const addNewUser = (userToadd) => {\r\n        // userToadd.password = \"******\"\r\n        return(\r\n            auThentication.createUserWithEmailAndPassword(userToadd.email,userToadd.password).then((Credentials)=>{\r\n                fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToadd).catch((e)=>{\r\n                    Alert.alert(e.toString());\r\n                }).catch((e)=>Alert.alert(e.toString()))\r\n            }).then(()=>{Alert.alert(userToadd.email,\"ajouté 👍\")}).catch((e)=>Alert.alert(e.toString()))\r\n        )\r\n    }\r\n    \r\n    const LogOut = () =>{\r\n        auThentication.signOut();\r\n        setuserState({\r\n            connected:false,\r\n            isAdmin:false,\r\n            uid : \"\",\r\n            infos:{\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <TheContext.Provider value={ {userState,usersList,Login,LogOut,addNewUser,getUsersList} }>\r\n            {props.children}\r\n        </TheContext.Provider>\r\n    )\r\n}\r\nconst TheContextConsumer = TheContext.Consumer;\r\n\r\nexport {TheContextProvider,TheContextConsumer}"]},"metadata":{},"sourceType":"module"}