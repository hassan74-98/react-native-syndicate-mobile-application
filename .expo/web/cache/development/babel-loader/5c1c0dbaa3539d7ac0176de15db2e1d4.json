{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\dropshipping\\\\mobile developpement\\\\bentriaa\\\\context\\\\context.js\";\nimport React, { createContext, useEffect, useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { auThentication, fireStore } from \"../firebase/firebase\";\nvar TheContext = createContext();\nexport default function TheContextProvider(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      userState = _useState2[0],\n      setuserState = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      usersList = _useState4[0],\n      setusersList = _useState4[1];\n\n  var getUsersList = function getUsersList() {\n    var t = [];\n    fireStore.collection(\"users\").get().then(function (snapshot) {\n      snapshot.docs.map(function (doc) {\n        var x = doc.data();\n        x.proprietaireDe.map(function (appartement) {\n          var date = appartement[\"DateDeSignatureDuContrat\"].toDate();\n        });\n        x.id = doc.id;\n        t.push(x);\n      });\n    }).then(function (e) {\n      setusersList(t);\n    });\n  };\n\n  var Login = function Login(email, password) {\n    auThentication.signInWithEmailAndPassword(email, password).then(function (Credentials) {\n      fireStore.collection('users').doc(Credentials.user.uid).get().then(function (doc) {\n        setuserState(doc.data());\n      });\n    }).then(function () {\n      return getUsersList();\n    });\n  };\n\n  var addNewUser = function addNewUser(userToadd) {\n    return auThentication.createUserWithEmailAndPassword(userToadd.email, userToadd.password).then(function (Credentials) {\n      fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToadd).catch(function (e) {\n        Alert.alert(e.toString());\n      }).catch(function (e) {\n        return Alert.alert(e.toString());\n      });\n    }).then(function () {\n      Alert.alert(userToadd.email, \"ajouté 👍\");\n    }).catch(function (e) {\n      return Alert.alert(e.toString());\n    });\n  };\n\n  var LogOut = function LogOut() {\n    auThentication.signOut();\n    setuserState({\n      connected: false,\n      isAdmin: false,\n      uid: \"\",\n      infos: {}\n    });\n  };\n\n  return React.createElement(TheContext.Provider, {\n    value: {\n      userState: userState,\n      usersList: usersList,\n      Login: Login,\n      LogOut: LogOut,\n      addNewUser: addNewUser\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, props.children);\n}\nvar TheContextConsumer = TheContext.Consumer;\nexport { TheContextProvider, TheContextConsumer };","map":{"version":3,"sources":["D:/dropshipping/mobile developpement/bentriaa/context/context.js"],"names":["React","createContext","useEffect","useState","auThentication","fireStore","TheContext","TheContextProvider","props","userState","setuserState","usersList","setusersList","getUsersList","t","collection","get","then","snapshot","docs","map","doc","x","data","proprietaireDe","appartement","date","toDate","id","push","e","Login","email","password","signInWithEmailAndPassword","Credentials","user","uid","addNewUser","userToadd","createUserWithEmailAndPassword","set","catch","Alert","alert","toString","LogOut","signOut","connected","isAdmin","infos","children","TheContextConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\nimport { Alert } from \"react-native\";\r\nimport { auThentication, fireStore } from \"../firebase/firebase\";\r\n\r\n\r\nconst TheContext = createContext();\r\n\r\nexport default function TheContextProvider(props) {\r\n\r\n    const [userState, setuserState] = useState({});\r\n    \r\n    const [usersList, setusersList] = useState([])\r\n    \r\n    \r\n    \r\n\r\n    const getUsersList = () => {\r\n        let t = []\r\n        fireStore.collection(\"users\").get().then((snapshot) => {\r\n            \r\n            snapshot.docs.map((doc) => {\r\n                let x = doc.data();\r\n                \r\n                x.proprietaireDe.map((appartement)=>{\r\n                    let date = appartement[\"DateDeSignatureDuContrat\"].toDate()\r\n                    // appartement[\"DateDeSignatureDuContrat\"] = appartement[\"DateDeSignatureDuContrat\"].toDate()\r\n                    \r\n                })\r\n                \r\n                x.id = doc.id;\r\n                t.push(x)\r\n            })\r\n\r\n        }).then((e)=>{setusersList(t)}) \r\n    }\r\n    \r\n    \r\n\r\n    const Login = (email,password) => {\r\n        \r\n        auThentication.signInWithEmailAndPassword(email,password).then((Credentials)=>{\r\n            \r\n            fireStore.collection('users').doc(Credentials.user.uid).get().then((doc)=>{\r\n                setuserState(doc.data());\r\n                \r\n            })\r\n            \r\n        }).then(() => getUsersList())\r\n    }\r\n    const addNewUser = (userToadd) => {\r\n        // userToadd.password = \"******\"\r\n        return(\r\n            auThentication.createUserWithEmailAndPassword(userToadd.email,userToadd.password).then((Credentials)=>{\r\n                fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToadd).catch((e)=>{\r\n                    Alert.alert(e.toString());\r\n                }).catch((e)=>Alert.alert(e.toString()))\r\n            }).then(()=>{Alert.alert(userToadd.email,\"ajouté 👍\")}).catch((e)=>Alert.alert(e.toString()))\r\n        )\r\n    }\r\n    \r\n    const LogOut = () =>{\r\n        auThentication.signOut();\r\n        setuserState({\r\n            connected:false,\r\n            isAdmin:false,\r\n            uid : \"\",\r\n            infos:{\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <TheContext.Provider value={ {userState,usersList,Login,LogOut,addNewUser,  } }>\r\n            {props.children}\r\n        </TheContext.Provider>\r\n    )\r\n}\r\nconst TheContextConsumer = TheContext.Consumer;\r\n\r\nexport {TheContextProvider,TheContextConsumer}"]},"metadata":{},"sourceType":"module"}