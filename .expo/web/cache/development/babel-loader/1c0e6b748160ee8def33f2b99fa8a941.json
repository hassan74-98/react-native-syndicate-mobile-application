{"ast":null,"code":"var FindNextJun = function FindNextJun(date) {\n  var dateToSec = date.getTime();\n  var junDateToSec = date.setMonth(5);\n  junDateToSec = date.setDate(1);\n\n  if (dateToSec - junDateToSec > 0) {\n    return new Date(365 * 24 * 60 * 60 * 1000 + junDateToSec);\n  } else {\n    return new Date(junDateToSec);\n  }\n};\n\nvar AllCharges = function AllCharges(ListDesAppartements) {\n  var Appartments = [];\n  var Total = 0;\n  var today = new Date();\n  today.setUTCHours(0, 0, 0, 0);\n  var NextJunFromToDayTimeStamp = FindNextJun(today).getTime();\n\n  if (typeof ListDesAppartements !== \"undefined\") {\n    ListDesAppartements.map(function (appartment, i) {\n      var app = {\n        titreFoncier: appartment.titreFoncier,\n        ChargesList: [],\n        Total: 0\n      };\n      var ContractTimeStamp = appartment.DateDeSignatureDuContrat.toDate().getTime();\n      var ContractnextJuneTimeStamp = FindNextJun(appartment.DateDeSignatureDuContrat.toDate()).getTime();\n\n      do {\n        app[\"ChargesList\"].push({\n          days: Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24)),\n          charge: Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24) * (4850 / 365)),\n          saison: new Date(ContractnextJuneTimeStamp - 1000 * 365 * 60 * 60 * 24).getFullYear() + \"/\" + new Date(ContractnextJuneTimeStamp).getFullYear(),\n          startingDay: JSON.stringify(new Date(ContractTimeStamp)).split('\"')[1].split('T')[0],\n          To: JSON.stringify(new Date(ContractnextJuneTimeStamp - 1000 * 60 * 60)).split('\"')[1].split('T')[0]\n        });\n        app[\"Total\"] += Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24) * (4850 / 365));\n        Total += Math.floor((ContractnextJuneTimeStamp - ContractTimeStamp) / (1000 * 60 * 60 * 24) * (4850 / 365));\n        ContractTimeStamp = ContractnextJuneTimeStamp;\n        ContractnextJuneTimeStamp += 365 * 24 * 60 * 60 * 1000;\n      } while (ContractnextJuneTimeStamp <= NextJunFromToDayTimeStamp);\n\n      Appartments.push(app);\n    });\n  }\n\n  return {\n    Appartments: Appartments,\n    Total: Total\n  };\n};\n\nexport { AllCharges };","map":{"version":3,"sources":["D:/dropshipping/mobile developpement/bentriaa/useFull/Charges.js"],"names":["FindNextJun","date","dateToSec","getTime","junDateToSec","setMonth","setDate","Date","AllCharges","ListDesAppartements","Appartments","Total","today","setUTCHours","NextJunFromToDayTimeStamp","map","appartment","i","app","titreFoncier","ChargesList","ContractTimeStamp","DateDeSignatureDuContrat","toDate","ContractnextJuneTimeStamp","push","days","Math","floor","charge","saison","getFullYear","startingDay","JSON","stringify","split","To"],"mappings":"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","sourcesContent":["\r\n\r\n\r\n\r\nconst FindNextJun = (date)=>{\r\n        let dateToSec = date.getTime()\r\n        let junDateToSec = date.setMonth(5)\r\n        junDateToSec = date.setDate(1)\r\n        if(dateToSec-junDateToSec > 0){\r\n            return(new Date(365*24*60*60*1000+junDateToSec))\r\n        }else{\r\n            return(new Date(junDateToSec))\r\n        }\r\n}\r\n\r\nconst AllCharges = (ListDesAppartements) => {\r\n    let Appartments = []\r\n    // let ChargesList = []\r\n    let Total = 0\r\n    let today = new Date()\r\n    today.setUTCHours(0, 0, 0, 0);\r\n    let NextJunFromToDayTimeStamp = FindNextJun(today).getTime()\r\n    \r\n    \r\n    if(typeof(ListDesAppartements) !== \"undefined\"){\r\n        \r\n\r\n        ListDesAppartements.map((appartment,i)=>{\r\n            \r\n            let app = {\r\n                titreFoncier : appartment.titreFoncier,\r\n                ChargesList : [],\r\n                Total : 0\r\n            }\r\n            let ContractTimeStamp = appartment.DateDeSignatureDuContrat.toDate().getTime()\r\n            let ContractnextJuneTimeStamp = FindNextJun(appartment.DateDeSignatureDuContrat.toDate()).getTime()\r\n\r\n            \r\n            \r\n            do{\r\n                app[\"ChargesList\"].push({\r\n                    days : Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24) ),\r\n                    charge : Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24)*(4850/365) ),\r\n                    saison : (new Date(ContractnextJuneTimeStamp-(1000*365*60*60*24))).getFullYear()+\"/\"+(new Date(ContractnextJuneTimeStamp)).getFullYear(),\r\n                    startingDay: (JSON.stringify(new Date(ContractTimeStamp))).split('\"')[1].split('T')[0],\r\n                    To: (JSON.stringify(new Date(ContractnextJuneTimeStamp-(1000*60*60)))).split('\"')[1].split('T')[0]\r\n                })\r\n                app[\"Total\"] += Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24)*(4850/365) )\r\n                Total += Math.floor( (ContractnextJuneTimeStamp-ContractTimeStamp)/(1000*60*60*24)*(4850/365) )\r\n\r\n                ContractTimeStamp = ContractnextJuneTimeStamp;\r\n                ContractnextJuneTimeStamp += 365*24*60*60*1000;\r\n            }while(ContractnextJuneTimeStamp <= NextJunFromToDayTimeStamp)\r\n            \r\n            \r\n            Appartments.push(app)\r\n        })\r\n        \r\n    }\r\n    \r\n    \r\n        \r\n    \r\n    return({Appartments,Total})\r\n\r\n}\r\nexport {AllCharges}"]},"metadata":{},"sourceType":"module"}