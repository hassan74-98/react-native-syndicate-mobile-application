{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\dropshipping\\\\mobile developpement\\\\bentriaa\\\\screens\\\\EditUser.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { TheContextConsumer } from \"../context/context\";\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { fireStore } from \"../firebase/firebase\";\nimport _ from 'lodash';\nexport default function EditUser(_ref) {\n  var _this = this;\n\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var initialUser = _.cloneDeep(route.params);\n\n  var _useState = useState(route.params),\n      _useState2 = _slicedToArray(_useState, 2),\n      userToEdit = _useState2[0],\n      setuserToEdit = _useState2[1];\n\n  var _useState3 = useState(route.params),\n      _useState4 = _slicedToArray(_useState3, 2),\n      clone = _useState4[0],\n      setclone = _useState4[1];\n\n  var handleAddAppartement = function handleAddAppartement() {\n    setuserToEdit(_objectSpread(_objectSpread({}, userToEdit), userToEdit.proprietaireDe.push({\n      titreFoncier: \"\",\n      DateDeSignatureDuContrat: \"\",\n      NomDuNotaire: \"\",\n      NAppartement: \"\",\n      Immeuble: \"\"\n    })));\n  };\n\n  var _useState5 = useState(-1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      role = _useState6[0],\n      setrole = _useState6[1];\n\n  var myRefs = useRef([]);\n  var myRefs2 = useRef([]);\n\n  var _useState7 = useState('date'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      mode = _useState8[0],\n      setMode = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      show = _useState10[0],\n      setShow = _useState10[1];\n\n  var handleDatePickerOnChange = function handleDatePickerOnChange(selectedDate, index, key) {\n    var NewObject = _objectSpread({}, userToEdit);\n\n    NewObject[\"proprietaireDe\"][index][key] = new Date(JSON.stringify(selectedDate).split('\"')[1].split('T')[0]);\n    return NewObject;\n  };\n\n  var showMode = function showMode(currentMode) {\n    setMode(currentMode);\n  };\n\n  var showDatepicker = function showDatepicker(x) {\n    showMode('date');\n    setrole(x);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    var verfied = true;\n\n    if (!userToEdit[\"proprietaireDe\"][0]) {\n      verfied = false;\n      Alert.alert(\"Champ maquant:\", \"Veuillez ajouter au moins un appartement.\" + userToEdit[\"proprietaireDe\"].length.toString());\n    }\n\n    Object.keys(userToEdit).map(function (key, i) {\n      if (key.toString() === \"proprietaireDe\") {\n        userToEdit[key].map(function (appartement, appI) {\n          Object.keys(appartement).map(function (appKey) {\n            if (appartement[appKey] === \"\") {\n              Alert.alert(\"Champ manquant:\", appKey.toString() + \"\\n\" + \"(Appartement : \" + (appI + 1) + \")\");\n              verfied = false;\n            }\n          });\n        });\n      } else {\n        if (userToEdit[key] === \"\") {\n          Alert.alert(\"Champ manquant:\", key.toString());\n          verfied = false;\n        }\n      }\n    });\n\n    if (verfied === true) {\n      auThentication.createUserWithEmailAndPassword(userToEdit.email, userToEdit.password).then(function (Credentials) {\n        fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToEdit).catch(function (e) {\n          Alert.alert(e.toString());\n        }).catch(function (e) {\n          return Alert.alert(e.toString());\n        });\n      }).then(function () {\n        Alert.alert(userToEdit.email, \"ajouté 👍\");\n        setuserToEdit({\n          email: \"\",\n          password: \"123456\",\n          nom: \"\",\n          prenom: \"\",\n          numeroDeTelephone: \"\",\n          cin: \"\",\n          proprietaireDe: []\n        });\n      }).catch(function (e) {\n        return Alert.alert(e.toString());\n      });\n    }\n  };\n\n  return React.createElement(TheContextConsumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, function (value) {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 29\n      }\n    }), React.createElement(View, {\n      style: {\n        height: 70,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: \"lightgrey\",\n        width: \"100%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 33\n      }\n    }, \" Liste des utilisateurs \")), React.createElement(ScrollView, {\n      style: {\n        backgroundColor: \"grey\",\n        width: \"100%\",\n        height: \"50%\",\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, userToEdit && React.createElement(View, {\n      style: {\n        height: \"100%\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: \"white\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 41\n      }\n    }, React.createElement(Text, {\n      style: {\n        backgroundColor: \"red\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 45\n      }\n    }, JSON.stringify(userToEdit.email)))), React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        width: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, React.createElement(View, {\n      style: {\n        flexGrow: 1,\n        padding: 20,\n        borderRadius: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 33\n      }\n    }, React.createElement(Button, {\n      title: \"Ajouter\",\n      onPress: function onPress() {\n        setuserToEdit({});\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 37\n      }\n    })), React.createElement(View, {\n      style: {\n        flexGrow: 1,\n        padding: 20,\n        borderRadius: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 33\n      }\n    }, React.createElement(Button, {\n      title: \"Annuler\",\n      onPress: function onPress() {\n        Alert.alert(\"\", JSON.stringify(userToEdit[\"email\"]) + \"\\n\" + JSON.stringify(clone[\"email\"]));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 37\n      }\n    }))));\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'space-between'\n  },\n  input: {\n    width: 300,\n    height: 40,\n    padding: 5,\n    marginVertical: 10,\n    marginHorizontal: 30,\n    borderWidth: 1,\n    borderColor: 'grey',\n    borderStyle: 'solid',\n    borderRadius: 3,\n    backgroundColor: \"white\"\n  }\n});","map":{"version":3,"sources":["D:/dropshipping/mobile developpement/bentriaa/screens/EditUser.js"],"names":["React","useEffect","useRef","useState","TouchableOpacity","TheContextConsumer","DateTimePicker","fireStore","_","EditUser","route","navigation","initialUser","cloneDeep","params","userToEdit","setuserToEdit","clone","setclone","handleAddAppartement","proprietaireDe","push","titreFoncier","DateDeSignatureDuContrat","NomDuNotaire","NAppartement","Immeuble","role","setrole","myRefs","myRefs2","mode","setMode","show","setShow","handleDatePickerOnChange","selectedDate","index","key","NewObject","Date","JSON","stringify","split","showMode","currentMode","showDatepicker","x","handleSubmit","verfied","Alert","alert","length","toString","Object","keys","map","i","appartement","appI","appKey","auThentication","createUserWithEmailAndPassword","email","password","then","Credentials","collection","doc","user","uid","set","catch","e","nom","prenom","numeroDeTelephone","cin","value","styles","container","height","alignItems","justifyContent","backgroundColor","width","textAlign","display","flexDirection","flexGrow","padding","borderRadius","StyleSheet","create","flex","input","marginVertical","marginHorizontal","borderWidth","borderColor","borderStyle"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport { Alert } from 'react-native'\r\nimport { View, Text, TextInput, StyleSheet, Button,ScrollView } from 'react-native'\r\nimport { TouchableOpacity } from 'react-native-gesture-handler'\r\nimport { TheContextConsumer } from '../context/context'\r\nimport DateTimePicker from '@react-native-community/datetimepicker';\r\nimport { fireStore } from '../firebase/firebase'\r\n\r\nimport _ from 'lodash';\r\nexport default function EditUser({ route,navigation }) {\r\n    \r\n    // const [initialUser, setuserToAdd] = useState(route.params.user)\r\n    \r\n    const initialUser = _.cloneDeep(route.params)\r\n\r\n    const [userToEdit, setuserToEdit] = useState(route.params)\r\n    const [clone, setclone] = useState(route.params)\r\n    //++++++++++++++++++++++++++++++++++++++++++++++++ \r\n    // useEffect(() => {\r\n    //     setuserToEdit(_.cloneDeep(route.params))\r\n        \r\n    // }, [])\r\n\r\n    // add appartement to appatements\r\n    const handleAddAppartement = () => {\r\n        setuserToEdit({...userToEdit,...userToEdit.proprietaireDe.push(\r\n            {\r\n                titreFoncier:\"\",\r\n                DateDeSignatureDuContrat : \"\",\r\n                NomDuNotaire : \"\",\r\n                NAppartement : \"\",\r\n                Immeuble : \"\",\r\n            }\r\n        )})\r\n    }\r\n    \r\n    // ++++++++++++++++++++++++++++\r\n\r\n\r\n    // Triggers to show date-pickers\r\n    const [role, setrole] = useState(-1)\r\n    //+++++++++++++++++++++++++++++\r\n\r\n    // input Refs To focus on next input automatically\r\n    const myRefs= useRef([]);\r\n    const myRefs2= useRef([]);\r\n    // +++++++++++++++++++++++++++++++++++++++++++++++\r\n\r\n    // date picker parameters and functions\r\n    const [mode, setMode] = useState('date');\r\n    const [show, setShow] = useState(false);\r\n\r\n    const handleDatePickerOnChange = (selectedDate,index,key) => {\r\n\r\n        \r\n        let NewObject = {...userToEdit}\r\n        NewObject[\"proprietaireDe\"][index][key] = (new Date(JSON.stringify(selectedDate).split('\"')[1].split('T')[0]));\r\n        return(NewObject)\r\n    }\r\n    const showMode = (currentMode) => {\r\n        setMode(currentMode);\r\n    };\r\n    const showDatepicker = (x) => {\r\n        showMode('date');\r\n        setrole(x)\r\n    };\r\n    // +++++++++++++++++++++++++++++++++++++++++++++++\r\n\r\n\r\n    \r\n    \r\n\r\n    \r\n    \r\n    \r\n    \r\n    const handleSubmit = () => {\r\n        let verfied = true;\r\n        \r\n        if(!userToEdit[\"proprietaireDe\"][0]){\r\n            verfied = false;\r\n            Alert.alert(\"Champ maquant:\",\"Veuillez ajouter au moins un appartement.\"+userToEdit[\"proprietaireDe\"].length.toString())\r\n        }\r\n        Object.keys(userToEdit).map((key,i)=>{\r\n            if(key.toString() === \"proprietaireDe\"){\r\n                \r\n                userToEdit[key].map((appartement,appI)=>{\r\n                    Object.keys(appartement).map((appKey)=>{\r\n                        if(appartement[appKey] === \"\"){\r\n                            Alert.alert(\"Champ manquant:\", appKey.toString() +\"\\n\"+ \"(Appartement : \" + (appI+1)+\")\")\r\n                            verfied = false\r\n                        }\r\n                    })\r\n                })\r\n                \r\n            }else{\r\n                if(userToEdit[key] === \"\"){\r\n                    Alert.alert(\"Champ manquant:\",key.toString())\r\n                    verfied = false;\r\n                }\r\n            }\r\n\r\n        })\r\n        if(verfied===true){\r\n\r\n            auThentication.createUserWithEmailAndPassword(userToEdit.email,userToEdit.password).then((Credentials)=>{\r\n                fireStore.collection(\"users\").doc(Credentials.user.uid).set(userToEdit).catch((e)=>{\r\n                    Alert.alert(e.toString());\r\n                }).catch((e)=>Alert.alert(e.toString()))\r\n            }).then(()=>{\r\n                Alert.alert(userToEdit.email,\"ajouté 👍\");\r\n                setuserToEdit({\r\n                    email:\"\",\r\n                    password:\"123456\",\r\n                    nom:\"\",\r\n                    prenom:\"\",\r\n                    numeroDeTelephone:\"\",\r\n                    cin:\"\",\r\n                    proprietaireDe:[]\r\n                })\r\n            }).catch((e)=>Alert.alert(e.toString()))\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n\r\n    return (\r\n        <TheContextConsumer>\r\n                {(value) => {\r\n                    return(\r\n                        <View style={styles.container}>\r\n                            \r\n                            \r\n                            <Text></Text>\r\n\r\n                            <View style={{height:70,alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"lightgrey\",width:\"100%\"}}>\r\n                                <Text> Liste des utilisateurs </Text>\r\n                            </View>\r\n\r\n                            <ScrollView style={{backgroundColor:\"grey\",width:\"100%\",height:\"50%\",textAlign:\"center\"}}>\r\n                                    {(userToEdit) && (\r\n                                        <View style={{height:\"100%\",display:\"flex\",flexDirection:\"row\",alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"white\"}}>\r\n\r\n                                            <Text style={{backgroundColor:\"red\"}}>\r\n                                                {JSON.stringify(userToEdit.email)}\r\n                                            </Text>\r\n                                            \r\n                                        </View>\r\n                                    )}\r\n                            </ScrollView>\r\n\r\n\r\n                            <View style={{flexDirection:\"row\",width:\"100%\",alignItems:\"center\",justifyContent:\"space-between\"}}>\r\n                                <View style={{flexGrow:1,padding:20,borderRadius:20}}>\r\n                                    <Button\r\n                                        title=\"Ajouter\"\r\n                                        onPress={\r\n                                            // handleSubmit\r\n                                            () => {\r\n                                                // setuserToEdit((prev)=>{\r\n                                                //     let New = {...prev}\r\n                                                //     New.email = \"test@gmail.com\"\r\n                                                //     return(New)\r\n                                                // })\r\n                                                setuserToEdit({})\r\n                                                // Alert.alert(\"\",JSON.stringify(userToEdit))\r\n                                            }\r\n                                        }\r\n                                    />\r\n                                </View>\r\n                                <View style={{flexGrow:1,padding:20,borderRadius:20}}>\r\n                                    <Button\r\n                                        title=\"Annuler\"\r\n                                        onPress={()=>{\r\n                                            // console.log(initialUser.email+\"\\n\"+userToEdit.email)\r\n                                            // Alert.alert(JSON.stringify(value.usersList[0].proprietaireDe[0].DateDeSignatureDuContrat),JSON.stringify(userToEdit.proprietaireDe[0].DateDeSignatureDuContrat))\r\n                                            // setuserToAdd(initialUser)\r\n                                            // value.getUsersList()\r\n                                            Alert.alert(\"\",JSON.stringify(userToEdit[\"email\"])+\"\\n\"+JSON.stringify(clone[\"email\"]))\r\n                                            // setuserToAdd(userToEdit)\r\n                                            \r\n                                        }\r\n                                            \r\n                                        }\r\n                                    />\r\n                                </View>\r\n                                \r\n                            </View>\r\n                            \r\n                            \r\n                        </View>      \r\n                    )\r\n                }}\r\n        </TheContextConsumer>\r\n            \r\n            \r\n\r\n        \r\n    )\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n    },\r\n    input: {\r\n        width: 300,\r\n        height: 40,\r\n        padding: 5,\r\n        marginVertical: 10,\r\n        marginHorizontal: 30,\r\n        borderWidth: 1,\r\n        borderColor: 'grey',\r\n        borderStyle: 'solid',\r\n        borderRadius: 3,\r\n        backgroundColor:\"white\",\r\n    },\r\n});"]},"metadata":{},"sourceType":"module"}